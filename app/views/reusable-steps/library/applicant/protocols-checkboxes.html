
{% extends "layout.html" %}

{% block pageTitle %}
  GOV.UK Prototype Kit
{% endblock %}

{% block content %}
{% set assessSection = "protocols" %}
<script language="JavaScript" type="text/javascript" src="/public/javascripts/jquery-1.2.6.min.js">
</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('[data-toggle="toggle"]').change(function(){
      $(this).prev().toggleClass("selected");
      $(this).parents().next('.protocol-content').toggleClass('hide');
      $(this).parents().toggleClass('no-underline');
      $(this).parents().siblings('td').toggleClass('no-underline');
    });
  });
</script>
{% set stepCount = data['stepCount']|int %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      {% include "includes/licence-header-ppl-application.html" %}
      {% include "includes/list-of-sections.html" %}               
   
      <h1 class="govuk-heading-l">Protocols</h1>   
      <p>
        <a href="#">View summary table</a>
      </p>
        
      <h2 class="govuk-heading-m">General constraints</h2>

      <p>Please note, constraints on procedures involving anaesthesia, surgery, substance administration and withdrawal of fluids apply to all protocols.</p>
     
      <details class="govuk-details" data-module="govuk-details">
        <summary class="govuk-details__summary">
          <span class="govuk-details__summary-text">
            Show general constraints
          </span>
        </summary>
        <div class="govuk-details__text">  
        Induction of liver tumour growth

        <h3 class="govuk-heading-s">Licences for work that needs to satisfy regulatory guidelines</h3>
        <span class="govuk-hint">Information relevant to these standards may also be found in the project plan</span>
        <ul class="govuk-list govuk-list--bullet">
          <li>
            The regulatory guidelines or frameworks to be met are clear.
          </li>
          <li>
            There are no satisfactory non-animal alternatives.
          </li>
          <li>
            Where non-animal alternatives are accepted by the regulator they are used.
          </li>
          <li>
            There’s a commitment to follow the most refined tests using the minimum numbers of animals that will satisfy the regulator(s).
          </li>
          <li>
            Where testing is for non-EU countries, the method used is the most refined, uses the fewest animals of the least sentient species and provides a scientific result recognised as valid by EU legislation.
          </li>
          <li>
            For all batch quality testing using live animals, the substance or product to be tested is named and a scientific justification provided.
          </li>
        </ul>
      </div>
      </details>   
    
    <div id="firstProtocol" class="protocol-container">
      <div class="protocol-header-in-progress">
        <h3 class="govuk-heading-m">
          <label for="option1" class="row-toggle protocol-title">
            <span class="row-toggle-copy">1: First protocol</span>
          </label>
          <input type="checkbox" name="option1" id="option1" data-toggle="toggle">
        </h3>
        <p>
          <strong>Severity category: Mild</strong>
        </p>
        <p>This protocol uses genetically altered (GA) animals</p>
        <table class="govuk-table">
          <thead class="govuk-table__head">
            <tr class="govuk-table__row">
              <th scope="col" class="govuk-table__header">Animal types</th>
              <th scope="col" class="govuk-table__header">Est. max. no. of animals</th>
              <th scope="col" class="govuk-table__header">Max. no. of uses per animal</th>
              <th scope="col" class="govuk-table__header">Life stages</th>
            </tr>
          </thead>
          <tbody class="govuk-table__body">
            <tr class="govuk-table__row">
              <td class="govuk-table__cell">Mice</td>
              <td class="govuk-table__cell">300</td>
              <td class="govuk-table__cell">1</td>
              <td class="govuk-table__cell">Adult, juvenile</td>
            </tr>
          </tbody>
        </table>
      </div>  
      <div id="" class="protocol-content ">
        
        <button class="accordion">Protocol details</button>
        <div class="panel"></div>

        <button class="accordion">Animals used in this protocol</button>
        <div class="panel"></div>

        <button id="p1-steps-anchor" class="accordion">Genetically altered animals (GAA)</button>
        <div class="panel"></div>


        <button  id="steps" class="accordion active">Steps</button>
        <div class="panel" style="display: block;">

          <h3 class="govuk-heading-m">Protocol steps</h3>
          <ul class="govuk-list govuk-list--bullet">

            {% for item in data['no2']['selection'] %}
              {% if item == 1 %}
                <li>Step {{loop.index}}: <a href="steps#id1">{{data['id1']['ref']}}</a></li>
              {% elif item == 2 %}
                <li>Step {{loop.index}}: <a href="steps#id2">{{data['id2']['ref']}}</a></li>
              {% elif item == 3 %}
                <li>Step {{loop.index}}: <a href="steps#id3">{{data['id3']['ref']}}</a></li>
              {% endif %}
            {% endfor %}
          
          </ul>
          <div class="comment-block">
            <div class="writeComment hide">
              <form action="protocols#p1-steps-anchor" method="POST">
                
                <div class="govuk-form-group">
                  <fieldset class="govuk-fieldset" aria-describedby="step-hint">
                    <legend class="govuk-label--s">
                      Select the steps that will be used in this protocol.
                    </legend>
                    <div id="step-hint" class="govuk-hint">If relevant you’ll be able to order them chronologically later.</div>
                    <div class="govuk-checkboxes govuk-checkboxes--small">
                      {% if data['stepId'] > 0 %}
                        <div class="govuk-checkboxes__item">
                          <input class="govuk-checkboxes__input" id="no{{data['p1StepNo']}}[selection]-1" name="no{{data['p1StepNo']}}[selection]" type="checkbox" value="1" >
                          <label class="govuk-label govuk-checkboxes__label" for="no{{data['p1StepNo']}}[selection]-1">
                            {{data['id1']['ref']}}
                          </label>
                        </div>
                      {% endif %}
                      {% if data['stepId']  > 2 %}
                        <div class="govuk-checkboxes__item">
                          <input class="govuk-checkboxes__input" id="no{{data['p1StepNo']}}[selection]-2" name="no{{data['p1StepNo']}}[selection]" type="checkbox" value="2" >
                          <label class="govuk-label govuk-checkboxes__label" for="no{{data['p1StepNo']}}[selection]-2">
                            {{data['id2']['ref']}}
                          </label>
                        </div>
                      {% endif %}
                      {% if data['stepId']  > 3 %}
                        <div class="govuk-checkboxes__item">
                          <input class="govuk-checkboxes__input" id="no{{data['p1StepNo']}}[selection]-3" name="no{{data['p1StepNo']}}[selection]" type="checkbox" value="3" >
                          <label class="govuk-label govuk-checkboxes__label" for="no{{data['p1StepNo']}}[selection]-3">
                            {{data['id3']['ref']}}
                          </label>
                        </div>
                      {% endif %}
                    </div>
                  </fieldset>
                  {% set p1StepNo = data['p1StepNo'] | int %}
                  {% set nextP1Step = p1StepNo + 1 %}
                  <div class="govuk-form-group">
                    <input type="hidden" name="p1StepNo" value={{nextP1Step}}>
                    <button class="govuk-button">Add steps to protocol</button>
                  </div>
                </form>
              </div>
            </div>
            <div class="initiateComment" >
              <a onClick='initiateComment(this)' class="govuk-button govuk-button--secondary">Add step</a>
            </div>
            <p><a href="steps">Mange steps in steps library</a></p>
          </div>  
        </div>

        <button class="accordion">Fate of animals</button>
        <div class="panel"></div>

        <button class="accordion">Animal experience</button>
        <div class="panel"></div>

        <button class="accordion">Experimental design</button>
        <div class="panel"></div>

        <button class="accordion">Protocol justification</button>
        <div class="panel"></div>
        <br>
        <br>
        {% include "includes/mark-protocol-complete.html" %}
      </div>
    </div>

      <div id="secondProtocol" class="protocol-container">
      <div class="protocol-header-in-progress">
        <h3 class="govuk-heading-m">
          <label for="option1" class="row-toggle protocol-title">
            <span class="row-toggle-copy">2: Second protocol</span>
          </label>
          <input type="checkbox" name="option1" id="option1" data-toggle="toggle">
        </h3>
        <p>
          <strong>Severity category: Mild</strong>
        </p>
        <p>This protocol uses genetically altered (GA) animals</p>
        <table class="govuk-table">
          <thead class="govuk-table__head">
            <tr class="govuk-table__row">
              <th scope="col" class="govuk-table__header">Animal types</th>
              <th scope="col" class="govuk-table__header">Est. max. no. of animals</th>
              <th scope="col" class="govuk-table__header">Max. no. of uses per animal</th>
              <th scope="col" class="govuk-table__header">Life stages</th>
            </tr>
          </thead>
          <tbody class="govuk-table__body">
            <tr class="govuk-table__row">
              <td class="govuk-table__cell">Mice</td>
              <td class="govuk-table__cell">300</td>
              <td class="govuk-table__cell">1</td>
              <td class="govuk-table__cell">Adult, juvenile</td>
            </tr>
          </tbody>
        </table>
      </div>  
      <div id="" class="protocol-content ">
        
        <button class="accordion">Protocol details</button>
        <div class="panel"></div>

        <button class="accordion">Animals used in this protocol</button>
        <div class="panel"></div>

        <button id="p2-steps-anchor" class="accordion">Genetically altered animals (GAA)</button>
        <div class="panel"></div>


        <button  id="steps" class="accordion active">Steps</button>
        <div class="panel" style="display: block;">

          <h3 class="govuk-heading-m">Protocol steps</h3>
          <ul class="govuk-list govuk-list--bullet">
            {% if data['p2StepNo'] > 1 %}
            <li>
              Step 1: 
              {% if data['no1']['selection'] == 1 %}
                <a href="steps#id1">{{data['id1']['ref']}}</a>
              {% elif data['no1']['selection'] == 2 %}
                <a href="steps#id2">{{data['id2']['ref']}}</a>
              {% elif data['no1']['selection'] == 3 %}
                <a href="steps#id3">{{data['id3']['ref']}}</a>
              {% endif %}
              </a>
            </li>
            {% endif %}
            
            {% if data['p1StepNo'] > 2 %}
            <li>
              Step 2: <a href="#">
              {% if data['no2']['selection'] == 1 %}
                <a href="steps#id1">{{data['id1']['ref']}}</a>
              {% elif data['no2']['selection'] == 2 %}
                <a href="steps#id2">{{data['id2']['ref']}}</a>
              {% elif data['no2']['selection'] == 3 %}
                <a href="steps#id3">{{data['id3']['ref']}}</a>
              {% endif %}
              </a>
            </li>
            {% endif %}
            
            {% if data['p1StepNo'] > 3 %}
            <li>
              Step 3: <a href="#">
              {% if data['no3']['selection'] == 1 %}
                <a href="steps#id1">{{data['id1']['ref']}}</a>
              {% elif data['no3']['selection'] == 2 %}
                <a href="steps#id2">{{data['id2']['ref']}}</a>
              {% elif data['no3']['selection'] == 3 %}
                <a href="steps#id3">{{data['id3']['ref']}}</a>
              {% endif %}
              </a>
            </li>
            {% endif %}
            
            
          </ul>
          <div class="comment-block">
            <div class="writeComment hide">
              <form action="protocols#p2-steps-anchor" method="POST">
                <div class="govuk-form-group">
                  <fieldset class="govuk-fieldset" aria-describedby="step-hint">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                      <h1 class="govuk-fieldset__heading">Add step 1</h1>
                    </legend>
                    <div id="step-hint" class="govuk-hint"></div>
                    <div class="govuk-radios govuk-radios--small">
                      {% if data['stepId'] > 0 %}
                        <div class="govuk-radios__item">
                          <input class="govuk-radios__input" id="no{{data['p2StepNo']}}[selection]-1" name="no{{data['p2StepNo']}}[selection]" type="radio" value="1" >
                          <label class="govuk-label govuk-radios__label" for="no{{data['p2StepNo']}}[selection]-1">
                            {{data['id1']['ref']}}
                          </label>
                        </div>
                      {% endif %}
                      {% if data['stepId']  > 2 %}
                        <div class="govuk-radios__item">
                          <input class="govuk-radios__input" id="no{{data['p2StepNo']}}[selection]-2" name="no{{data['p2StepNo']}}[selection]" type="radio" value="2" >
                          <label class="govuk-label govuk-radios__label" for="no{{data['p2StepNo']}}[selection]-2">
                            {{data['id2']['ref']}}
                          </label>
                        </div>
                      {% endif %}
                      {% if data['stepId']  > 3 %}
                        <div class="govuk-radios__item">
                          <input class="govuk-radios__input" id="no{{data['p2StepNo']}}[selection]-3" name="no{{data['p2StepNo']}}[selection]" type="radio" value="3" >
                          <label class="govuk-label govuk-radios__label" for="no{{data['p2StepNo']}}[selection]-3">
                            {{data['id3']['ref']}}
                          </label>
                        </div>
                      {% endif %}
                    </div>
                  </fieldset>
                  {% set p2StepNo = data['p2StepNo'] | int %}
                  {% set nextP2Step = p2StepNo + 1 %}
                  <div class="govuk-form-group">
                    <input type="hidden" name="p2StepNo" value={{nextP2Step}}>
                    <button class="govuk-button">Add step</button>
                  </div>
                  
                </form>
              </div>
            </div>
            <div class="initiateComment" >
              <a onClick='initiateComment(this)' class="govuk-button govuk-button--secondary">Add step</a>
            </div>
            <p><a href="steps">Mange steps in steps library</a></p>
          </div>  
        </div>

        <button class="accordion">Fate of animals</button>
        <div class="panel"></div>

        <button class="accordion">Animal experience</button>
        <div class="panel"></div>

        <button class="accordion">Experimental design</button>
        <div class="panel"></div>

        <button class="accordion">Protocol justification</button>
        <div class="panel"></div>
        <br>
        <br>
        {% include "includes/mark-protocol-complete.html" %}
      </div>


    </div>

      <div id="thirdProtocol" class="protocol-container">
        <div class="protocol-header-in-progress">
          <h3 class="govuk-heading-m">
            <label for="option1" class="row-toggle protocol-title">
              <span class="row-toggle-copy">3: Third protocol</span>
            </label>
            <input type="checkbox" name="option1" id="option1" data-toggle="toggle">
          </h3>
          <p>
            <strong>Severity category: Mild</strong>
          </p>
          <p>This protocol uses genetically altered (GA) animals</p>
          <table class="govuk-table">
            <thead class="govuk-table__head">
              <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header">Animal types</th>
                <th scope="col" class="govuk-table__header">Est. max. no. of animals</th>
                <th scope="col" class="govuk-table__header">Max. no. of uses per animal</th>
                <th scope="col" class="govuk-table__header">Life stages</th>
              </tr>
            </thead>
            <tbody class="govuk-table__body">
              <tr class="govuk-table__row">
                <td class="govuk-table__cell">Mice</td>
                <td class="govuk-table__cell">300</td>
                <td class="govuk-table__cell">1</td>
                <td class="govuk-table__cell">Adult, juvenile</td>
              </tr>
            </tbody>
          </table>
        </div>  
        <div id="" class="protocol-content ">
          
          <button class="accordion">Protocol details</button>
          <div class="panel"></div>
  
          <button class="accordion">Animals used in this protocol</button>
          <div class="panel"></div>
  
          <button id="p3-steps-anchor" class="accordion">Genetically altered animals (GAA)</button>
          <div class="panel"></div>
  
  
          <button  id="steps" class="accordion active">Steps</button>
          <div class="panel" style="display: block;">
  
            <h3 class="govuk-heading-m">Protocol steps</h3>
            <ul class="govuk-list govuk-list--bullet">
              {% if data['p3StepNo'] > 1 %}
              <li>
                Step 1: 
                {% if data['no1']['selection'] == 1 %}
                  <a href="steps#id1">{{data['id1']['ref']}}</a>
                {% elif data['no1']['selection'] == 2 %}
                  <a href="steps#id2">{{data['id2']['ref']}}</a>
                {% elif data['no1']['selection'] == 3 %}
                  <a href="steps#id3">{{data['id3']['ref']}}</a>
                {% endif %}
                </a>
              </li>
              {% endif %}
              
              {% if data['p1StepNo'] > 2 %}
              <li>
                Step 2: <a href="#">
                {% if data['no2']['selection'] == 1 %}
                  <a href="steps#id1">{{data['id1']['ref']}}</a>
                {% elif data['no2']['selection'] == 2 %}
                  <a href="steps#id2">{{data['id2']['ref']}}</a>
                {% elif data['no2']['selection'] == 3 %}
                  <a href="steps#id3">{{data['id3']['ref']}}</a>
                {% endif %}
                </a>
              </li>
              {% endif %}
              
              {% if data['p1StepNo'] > 3 %}
              <li>
                Step 3: <a href="#">
                {% if data['no3']['selection'] == 1 %}
                  <a href="steps#id1">{{data['id1']['ref']}}</a>
                {% elif data['no3']['selection'] == 2 %}
                  <a href="steps#id2">{{data['id2']['ref']}}</a>
                {% elif data['no3']['selection'] == 3 %}
                  <a href="steps#id3">{{data['id3']['ref']}}</a>
                {% endif %}
                </a>
              </li>
              {% endif %}
              
              
            </ul>
            <div class="comment-block">
              <div class="writeComment hide">
                <form action="protocols#p3-steps-anchor" method="POST">
                  <div class="govuk-form-group">
                    <fieldset class="govuk-fieldset" aria-describedby="step-hint">
                      <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                        <h1 class="govuk-fieldset__heading">Add step 1</h1>
                      </legend>
                      <div id="step-hint" class="govuk-hint"></div>
                      <div class="govuk-radios govuk-radios--small">
                        {% if data['stepId'] > 0 %}
                          <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="no{{data['p3StepNo']}}[selection]-1" name="no{{data['p3StepNo']}}[selection]" type="radio" value="1" >
                            <label class="govuk-label govuk-radios__label" for="no{{data['p3StepNo']}}[selection]-1">
                              {{data['id1']['ref']}}
                            </label>
                          </div>
                        {% endif %}
                        {% if data['stepId']  > 2 %}
                          <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="no{{data['p3StepNo']}}[selection]-2" name="no{{data['p3StepNo']}}[selection]" type="radio" value="2" >
                            <label class="govuk-label govuk-radios__label" for="no{{data['p3StepNo']}}[selection]-2">
                              {{data['id2']['ref']}}
                            </label>
                          </div>
                        {% endif %}
                        {% if data['stepId']  > 3 %}
                          <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="no{{data['p3StepNo']}}[selection]-3" name="no{{data['p3StepNo']}}[selection]" type="radio" value="3" >
                            <label class="govuk-label govuk-radios__label" for="no{{data['p3StepNo']}}[selection]-3">
                              {{data['id3']['ref']}}
                            </label>
                          </div>
                        {% endif %}
                      </div>
                    </fieldset>
                    {% set p3StepNo = data['p3StepNo'] | int %}
                    {% set nextP3Step = p3StepNo + 1 %}
                    <div class="govuk-form-group">
                      <input type="hidden" name="p3StepNo" value={{nextP3Step}}>
                      <button class="govuk-button">Add step</button>
                    </div>
                  </form>
                </div>
                
              </div>
              <div class="initiateComment" >
                <a onClick='initiateComment(this)' class="govuk-button govuk-button--secondary">Add step</a>
              </div>
              <p><a href="steps">Mange steps in steps library</a></p>
            </div>  
          </div>
  
          <button class="accordion">Fate of animals</button>
          <div class="panel"></div>
  
          <button class="accordion">Animal experience</button>
          <div class="panel"></div>
  
          <button class="accordion">Experimental design</button>
          <div class="panel"></div>
  
          <button class="accordion">Protocol justification</button>
          <div class="panel"></div>
          <br>
          <br>
          {% include "includes/mark-protocol-complete.html" %}
        </div>
    </div>

    <form action="protocols" method="post">
      <input type="hidden" name="stepNo" value="1">
      <input type="hidden" name="p1StepNo" value="1">
      <input type="hidden" name="p2StepNo" value="1">
      <input type="hidden" name="p3StepNo" value="1">
      <button>Reset</button>
    </form>

    </div>
  </div>

<style type="text/css">

.govuk-inset-text {
border-left: 10px solid #8F23B3;
}


  .govuk-details-protocols {
    margin-bottom: 0px;;
  }

  .section-content {
  background-color: #ffffff;
    cursor: pointer;
}
</style>
{% endblock %}
